<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1"/>

        <title>GWT Project</title>

        <link rel="stylesheet" href='./../assets/build/css/style.css'>
        <link rel="stylesheet" href='./../assets/build/fonts/icons/icons.css'>
        <link rel="shortcut icon" type="image/x-icon" href='./../images/favicon.png'>

        <script type="text/javascript" src="https://use.typekit.net/wwv3dxt.js"></script>
        <script type="text/javascript">try{Typekit.load();}catch(e){}</script>

        <script type="text/javascript" src='./../gwtproject/gwtproject.nocache.js'></script>
        <script>
            (function () {
                var cx = '008698606704604874043:or32ypbnrfu';
                var gcse = document.createElement('script');
                gcse.type = 'text/javascript';
                gcse.async = true;
                gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
                        '//www.google.com/cse/cse.js?cx=' + cx;
                var s = document.getElementsByTagName('script')[0];
                s.parentNode.insertBefore(gcse, s);
            })();
        </script>
    </head>

    <body>

        <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

        <nav role="navigation" id="nav" class="closed">
            <div class="wrapper">
                <ul>
                    <li class="logo"><a href='./../'>GWT homepage</a></li>
                    <li><a href='./../overview.html'><i class="icon_overview"></i>Overview</a></li>
                    <li class="sep"><a href='./../gettingstarted-v2.html'><i class="icon_getstarted"></i>Get started</a></li>
                    <li><a href='./../doc/latest/tutorial/index.html' class="active"><i class="icon_tutorials"></i>Tutorials</a></li>
                    <li><a href='./../doc/latest/DevGuide.html'><i class="icon_doc"></i>Docs</a></li>
                    <li><a href='./../examples.html'><i class="icon_ressources"></i>Resources</a></li>
                    <li><a href='./../makinggwtbetter.html'><i class="icon_makeGWTBetter"></i>Make GWT Better</a></li>
                    <li class="sep"><a href='./../terms.html'><i class="icon_terms"></i>Terms</a></li>
                    <li class="btn"><a href='./../download.html'><i class="icon_download"></i>Download</a></li>
                    <li class="btn"><a href="https://www.gwtproject.org/javadoc/latest/"><i class="icon_jd"></i>Java Doc</a></li>
                </ul>
                <div id="social">
                    <a href="https://gitter.im/gwtproject/gwt" target="_blank" title="Access our Gitter community">
                        <img src='./../images/gitter-logo-mark-white.png' height="100%" alt="GWT Gitter community"></img>
                    </a>
                </div>
                <a id="cc" href="#">Creative Commons Attribution 3.0 License.</a>
            </div>
        </nav>

        <div class="holder">
            <aside id="submenu">
                <nav>
                    <ul>
  <li><a href='./../gettingstarted-v2.html'>Get Started</a>
  <ul>
    <li><a href='./../gettingstarted-v2.html' title="Getting Started with GWT SDK">Overview</a></li>
    <li><a href='./../learnmore-sdk.html' title="Learn more about the GWT SDK">SDK Learn More</a></li>
    <li><a href='./../usingeclipse.html'>Configure Eclipse</a></li>
    <li><a href='./../usingintellij.html'>Configure IntelliJ</a></li>
  </ul></li>
  <li><a href='./../doc/latest/tutorial/index.html'>Tutorials</a>
  <ul>
    <li><a href='./../doc/latest/tutorial/index.html'>Overview</a></li>
    <li><a href="#" title="Create, build and run a GWT application">Build a GWT App.</a>
    <ul>
      <li><a href='./../doc/latest/tutorial/gettingstarted.html'>Introduction</a></li>
      <li><a href='./../doc/latest/tutorial/create.html'>Create</a></li>
      <li><a href='./../doc/latest/tutorial/design.html'>Design</a></li>
      <li><a href='./../doc/latest/tutorial/buildui.html'>Build the UI</a></li>
      <li><a href='./../doc/latest/tutorial/manageevents.html'>Manage Events</a></li>
      <li><a href='./../doc/latest/tutorial/codeclient.html'>Coding Client side</a></li>
      <li><a href='./../doc/latest/tutorial/debug.html'>Debugging</a></li>
      <li><a href='./../doc/latest/tutorial/style.html'>Styling</a></li>
      <li><a href='./../doc/latest/tutorial/compile.html'>Compilation</a></li>
    </ul></li>
    <li><a href="#">AJAX Communication</a>
    <ul>
      <li><a href='./../doc/latest/tutorial/clientserver.html'>Introduction</a></li>
      <li><a href='./../doc/latest/tutorial/RPC.html'>Using GWT RPC</a></li>
      <li><a href='./../doc/latest/tutorial/JSON.html'>Retrieving JSON</a></li>
      <li><a href='./../doc/latest/tutorial/Xsite.html'>Cross-site Requests</a></li>
      <li><a href='./../doc/latest/tutorial/JSONphp.html'>JSON php</a></li>
    </ul></li>
    <li><a href='./../doc/latest/tutorial/i18n.html'>Internationalization</a></li>
    <li><a href='./../doc/latest/tutorial/JUnit.html'>JUnit Testing</a></li>
    <li><a href='./../doc/latest/tutorial/appengine.html' title="Deploy to Google App Engine">Deploy to GAE</a></li>
    <li><a href='./../doc/latest/polymer-tutorial/introduction.html'>GWT &amp; Polymer</a>
    <ul>
      <li><a href='./../doc/latest/polymer-tutorial/create.html'>Create Project</a></li>
      <li><a href="#">Opt A: Widgets UI</a>
      <ul>
        <li><a href='./../doc/latest/polymer-tutorial/widgets-buildui.html'>Build the UI</a></li>
        <li><a href='./../doc/latest/polymer-tutorial/widgets-applogic.html'>Events &amp; Logic</a></li>
      </ul></li>
      <li><a href="#">Opt B: Elements UI</a>
      <ul>
        <li><a href='./../doc/latest/polymer-tutorial/elements-buildui.html'>Build the UI</a></li>
        <li><a href='./../doc/latest/polymer-tutorial/elements-applogic.html'>Events &amp; Logic</a></li>
      </ul></li>
    </ul></li>
  </ul></li>
  <li><a href='./../doc/latest/DevGuide.html'>Documentation</a>
  <ul>
    <li><a href='./../doc/latest/DevGuide.html'>Overview</a></li>
    <li><a href="#">Coding Basics</a>
    <ul>
      <li><a href='./../doc/latest/DevGuideCodingBasics.html'>Introduction</a></li>
      <li><a href='./../doc/latest/DevGuideOrganizingProjects.html'>Organize Projects</a></li>
      <li><a href='./../doc/latest/DevGuideCompilingAndDebugging.html'>Compile &amp; Debug</a></li>
      <li><a href='./../doc/latest/DevGuideCodingBasicsClient.html'>Client-side</a></li>
      <li><a href='./../doc/latest/DevGuideCodingBasicsCompatibility.html'>JRE Compatibility</a></li>
      <li><a href='./../doc/latest/DevGuideServerCommunication.html' title="Communicate with a server">Ajax Communication</a></li>
      <li><a href='./../doc/latest/DevGuideCodingBasicsHistory.html'>History Mechanism</a></li>
      <li><a href='./../doc/latest/DevGuideCodingBasicsFormatting.html' title="Number and Date Formating">Formatting</a></li>
      <li><a href='./../doc/latest/DevGuideCodingBasicsDelayed.html'>Delayed Logic</a></li>
      <li><a href='./../doc/latest/DevGuideCodingBasicsJSON.html'>Working with JSON</a></li>
      <li><a href='./../doc/latest/DevGuideCodingBasicsXML.html'>Working with XML</a></li>
      <li><a href='./../doc/latest/DevGuideCodingBasicsJSNI.html' title="JavaScript Native Interface">JavaScript: JSNI</a></li>
      <li><a href='./../doc/latest/DevGuideCodingBasicsJsInterop.html' title="JsInterop">JavaScript: JsInterop</a></li>
      <li><a href='./../doc/latest/DevGuideCodingBasicsOverlay.html'>Overlay Types</a></li>
      <li><a href='./../doc/latest/DevGuideCodingBasicsDeferred.html'>Deferred Binding</a></li>
    </ul></li>
    <li><a href="#">Build User Interfaces</a>
    <ul>
      <li><a href='./../doc/latest/DevGuideUi.html'>Contents</a></li>
      <li><a href='./../doc/latest/DevGuideUiBrowser.html'>Cross-Browser Support</a></li>
      <li><a href='./../doc/latest/DevGuideUiPanels.html'>Layout with Panels</a></li>
      <li><a href='./../doc/latest/DevGuideUiWidgets.html'>Widgets</a></li>
      <li><a href='./../doc/latest/DevGuideUiCustomWidgets.html'>Custom Widgets</a></li>
      <li><a href='./../doc/latest/DevGuideUiCellWidgets.html'>Cell Widgets</a></li>
      <li><a href='./../doc/latest/DevGuideUiCellTable.html'>Cell Tables</a></li>
      <li><a href='./../doc/latest/DevGuideUiCustomCells.html'>Custom Cells</a></li>
      <li><a href='./../doc/latest/DevGuideUiEditors.html'>Editors</a></li>
      <li><a href='./../doc/latest/DevGuideUiDom.html'>Using the DOM</a></li>
      <li><a href='./../doc/latest/DevGuideUiHandlers.html'>Events &amp; Handlers</a></li>
      <li><a href='./../doc/latest/DevGuideUiCss.html'>Css Styling</a></li>
      <li><a href='./../doc/latest/DevGuideUiBinder.html'>UIBinder</a></li>
      <li><a href='./../doc/latest/DevGuideUiImageBundles.html'>Image Bundles</a></li>
    </ul></li>
    <li><a href="#">Html5 Support</a>
    <ul>
      <li><a href='./../doc/latest/DevGuideHtml5.html'>Contents</a></li>
      <li><a href='./../doc/latest/DevGuideHtml5Storage.html'>Html5 Storage</a></li>
    </ul></li>
    <li><a href="#">Test with JUnit</a>
    <ul>
      <li><a href='./../doc/latest/DevGuideTesting.html'>Guide</a></li>
      <li><a href='./../doc/latest/DevGuideTestingHtmlUnit.html'>HtmlUnit</a></li>
      <li><a href='./../doc/latest/DevGuideTestingRemoteTesting.html'>Remote Testing</a></li>
      <li><a href='./../doc/latest/DevGuideTestingCoverage.html'>Code Coverage</a></li>
    </ul></li>
    <li><a href='./../doc/latest/DevGuideDeploying.html'>Deploy</a></li>
    <li><a href="#">Advanced Topics</a>
    <ul>
      <li><a href='./../doc/latest/DevGuideLogging.html'>Logging</a></li>
      <li><a href="#">Security</a>
      <ul>
        <li><a href='./../doc/latest/DevGuideSecurity.html'>Contents</a></li>
        <li><a href='./../doc/latest/DevGuideSecuritySafeHtml.html'>Using SafeHtml</a></li>
        <li><a href='./../doc/latest/DevGuideSecurityRpcXsrf.html'>XSRF Protection</a></li>
      </ul></li>
      <li><a href='./../doc/latest/DevGuideAutoBeans.html'>AutoBeans</a></li>
      <li><a href='./../doc/latest/DevGuideRequestFactory.html'>Request Factory</a></li>
      <li><a href='./../doc/latest/DevGuideMvpActivitiesAndPlaces.html'>Activities And Places</a></li>
      <li><a href='./../doc/latest/DevGuideValidation.html'>Validation</a></li>
      <li><a href="#">Internationalization</a>
      <ul>
        <li><a href='./../doc/latest/DevGuideI18n.html' title="I18N">Introduction</a></li>
        <li><a href='./../doc/latest/DevGuideI18nLocale.html'>Locale</a></li>
        <li><a href='./../doc/latest/DevGuideI18nConstants.html'>Constants</a></li>
        <li><a href='./../doc/latest/DevGuideI18nMessages.html'>Messages</a></li>
        <li><a href='./../doc/latest/DevGuideI18nPluralForms.html'>Plural Forms</a></li>
        <li><a href='./../doc/latest/DevGuideUiBinderI18n.html'>UI Binder</a></li>
      </ul></li>
      <li><a href='./../doc/latest/DevGuideA11y.html'>Accessibility</a></li>
      <li><a href="#">Optimize</a>
      <ul>
        <li><a href='./../doc/latest/DevGuideOptimizing.html'>Overview</a></li>
        <li><a href='./../doc/latest/DevGuideCodeSplitting.html'>Code Splitting</a></li>
        <li><a href='./../doc/latest/DevGuideCompileReport.html'>Compile Report</a></li>
        <li><a href='./../doc/latest/DevGuideClientBundle.html'>Client Bundle</a></li>
        <li><a href='./../doc/latest/DevGuideGssVsCss.html'>GSS vs CSS Syntax</a></li>
        <li><a href='./../doc/latest/DevGuideLightweightMetrics.html'>Lightweight Metrics</a></li>
      </ul></li>
      <li><a href='./../doc/latest/DevGuideLinkers.html'>Linkers</a></li>
    </ul></li>
    <li><a href="#">Reference</a>
    <ul>
      <li><a href='./../doc/latest/RefCommandLineTools.html'>Command Line Tools</a></li>
      <li><a href='./../doc/latest/RefGWTClassAPI.html'>GWT Class API</a></li>
      <li><a href='./../doc/latest/RefJreEmulation.html'>Jre Emulation</a></li>
      <li><a href='./../doc/latest/RefWidgetGallery.html'>Widgets Gallery</a></li>
    </ul></li>
    <li><a href="#">FAQ</a>
    <ul>
      <li><a href='./../doc/latest/FAQ.html'>Contents</a></li>
      <li><a href='./../doc/latest/FAQ_GettingStarted.html'>Getting Started</a></li>
      <li><a href='./../doc/latest/FAQ_DebuggingAndCompiling.html'>Debug &amp; Compile</a></li>
      <li><a href='./../doc/latest/FAQ_UI.html'>Build UI</a></li>
      <li><a href='./../doc/latest/FAQ_Client.html'>Client</a></li>
      <li><a href='./../doc/latest/FAQ_Server.html'>Server</a></li>
      <li><a href='./../doc/latest/FAQ_Troubleshooting.html'>Troubleshooting</a></li>
    </ul></li>
    <li><a href='./../doc/latest/DevGuideGlossary.html'>Glossary</a></li>
  </ul></li>
  <li><a href='./../examples.html'>Resources</a>
  <ul>
    <li><a href='./../examples.html'>Examples</a></li>
    <li><a href='./../presentations.html' title="Different Presentations on GWT">Presentations</a></li>
    <li><a href="#">Articles</a>
    <ul>
      <li><a href='./../articles/articles.html'>Overview</a></li>
      <li><a href='./../articles/gss_migration.html' title="Migrating CssResources from CSS to GSS">GSS Migration</a></li>
      <li><a href='./../articles/fragment_merging.html'>Fragment Merging</a></li>
      <li><a href='./../articles/superdevmode.html'>Super Dev Mode</a></li>
      <li><a href='./../articles/elemental.html'>Elemental</a></li>
      <li><a href='./../articles/dynamic_host_page.html' title="Running GWT in dynamic host pages">Dynamic Host Page</a></li>
      <li><a href="#">Building MVP apps</a>
      <ul>
        <li><a href='./../articles/mvp-architecture.html'>MVP Part I</a></li>
        <li><a href='./../articles/mvp-architecture-2.html'>MVP Part II</a></li>
      </ul></li>
      <li><a href='./../articles/using_gwt_with_hibernate.html'>GWT &amp; Hibernate</a></li>
      <li><a href='./../articles/testing_methodologies_using_gwt.html' title="Best practices on Testing GWT applications">Testing</a></li>
      <li><a href='./../articles/dom_events_memory_leaks_and_you.html' title="How GWT tackles memory leaks">DOM Memory Leaks</a></li>
      <li><a href='./../articles/security_for_gwt_applications.html' title="Security for GWT applications">Security</a></li>
      <li><a href='./../articles/using_gwt_for_json_mashups.html' title="Using GWT for JSON Mashups">JSON &amp; Mashups</a></li>
      <li><a href='./../articles/gwt-iphone.html'>GWT iPhone</a></li>
    </ul></li>
    <li><a href='./../books.html' title="GWT Books">Books</a></li>
    <li><a href='./../casestudies.html' title="Case Studies for using GWT">Case Studies</a></li>
    <li><a href="#">Community</a>
    <ul>
      <li><a href='./../community.html'>Community &amp; Forums</a></li>
      <li><a href='./../community-group-charter.html' title="Community Group Charter">Community Group</a></li>
      <li><a href='./../developer_spotlight.html'>Developer Spotlight</a></li>
    </ul></li>
  </ul></li>
  <li><a href='./../makinggwtbetter.html'>Making GWT Better</a>
  <ul>
    <li><a href='./../makinggwtbetter.html' title="Learn how to contribute to GWT">Contributing</a></li>
    <li><a href='./../lifeofanissue.html' title="Learn about GWT and the issue tracker">Life of an Issue</a></li>
    <li><a href='./../steering.html' title="The GWT Steering Committee">Steering Committee</a>
    <ul>
      <li><a href='./../meetingnotes.html'>Meeting Notes</a></li>
    </ul></li>
  </ul></li>
  <li><a href='./../terms.html'>Terms</a>
  <ul>
    <li><a href='./../terms.html'>GWT License</a></li>
    <li><a href='./../GWTPolicy.html'>GWT Name Use Policy</a></li>
    <li><a href='./../privacy.html'>Privacy</a></li>
  </ul></li>
</ul>
                </nav>
            </aside>

            <a id="logo-mobile" href="#"><span>>Back to GWT homepage</span></a>

            <div class="menu-button">Menu</div>

            <nav id="nav-mobile" class="flexnav">
                <ul>
  <li><a href='./../gettingstarted-v2.html'>Get Started</a>
  <ul>
    <li><a href='./../gettingstarted-v2.html' title="Getting Started with GWT SDK">Overview</a></li>
    <li><a href='./../learnmore-sdk.html' title="Learn more about the GWT SDK">SDK Learn More</a></li>
    <li><a href='./../usingeclipse.html'>Configure Eclipse</a></li>
    <li><a href='./../usingintellij.html'>Configure IntelliJ</a></li>
  </ul></li>
  <li><a href='./../doc/latest/tutorial/index.html'>Tutorials</a>
  <ul>
    <li><a href='./../doc/latest/tutorial/index.html'>Overview</a></li>
    <li><a href="#" title="Create, build and run a GWT application">Build a GWT App.</a>
    <ul>
      <li><a href='./../doc/latest/tutorial/gettingstarted.html'>Introduction</a></li>
      <li><a href='./../doc/latest/tutorial/create.html'>Create</a></li>
      <li><a href='./../doc/latest/tutorial/design.html'>Design</a></li>
      <li><a href='./../doc/latest/tutorial/buildui.html'>Build the UI</a></li>
      <li><a href='./../doc/latest/tutorial/manageevents.html'>Manage Events</a></li>
      <li><a href='./../doc/latest/tutorial/codeclient.html'>Coding Client side</a></li>
      <li><a href='./../doc/latest/tutorial/debug.html'>Debugging</a></li>
      <li><a href='./../doc/latest/tutorial/style.html'>Styling</a></li>
      <li><a href='./../doc/latest/tutorial/compile.html'>Compilation</a></li>
    </ul></li>
    <li><a href="#">AJAX Communication</a>
    <ul>
      <li><a href='./../doc/latest/tutorial/clientserver.html'>Introduction</a></li>
      <li><a href='./../doc/latest/tutorial/RPC.html'>Using GWT RPC</a></li>
      <li><a href='./../doc/latest/tutorial/JSON.html'>Retrieving JSON</a></li>
      <li><a href='./../doc/latest/tutorial/Xsite.html'>Cross-site Requests</a></li>
      <li><a href='./../doc/latest/tutorial/JSONphp.html'>JSON php</a></li>
    </ul></li>
    <li><a href='./../doc/latest/tutorial/i18n.html'>Internationalization</a></li>
    <li><a href='./../doc/latest/tutorial/JUnit.html'>JUnit Testing</a></li>
    <li><a href='./../doc/latest/tutorial/appengine.html' title="Deploy to Google App Engine">Deploy to GAE</a></li>
    <li><a href='./../doc/latest/polymer-tutorial/introduction.html'>GWT &amp; Polymer</a>
    <ul>
      <li><a href='./../doc/latest/polymer-tutorial/create.html'>Create Project</a></li>
      <li><a href="#">Opt A: Widgets UI</a>
      <ul>
        <li><a href='./../doc/latest/polymer-tutorial/widgets-buildui.html'>Build the UI</a></li>
        <li><a href='./../doc/latest/polymer-tutorial/widgets-applogic.html'>Events &amp; Logic</a></li>
      </ul></li>
      <li><a href="#">Opt B: Elements UI</a>
      <ul>
        <li><a href='./../doc/latest/polymer-tutorial/elements-buildui.html'>Build the UI</a></li>
        <li><a href='./../doc/latest/polymer-tutorial/elements-applogic.html'>Events &amp; Logic</a></li>
      </ul></li>
    </ul></li>
  </ul></li>
  <li><a href='./../doc/latest/DevGuide.html'>Documentation</a>
  <ul>
    <li><a href='./../doc/latest/DevGuide.html'>Overview</a></li>
    <li><a href="#">Coding Basics</a>
    <ul>
      <li><a href='./../doc/latest/DevGuideCodingBasics.html'>Introduction</a></li>
      <li><a href='./../doc/latest/DevGuideOrganizingProjects.html'>Organize Projects</a></li>
      <li><a href='./../doc/latest/DevGuideCompilingAndDebugging.html'>Compile &amp; Debug</a></li>
      <li><a href='./../doc/latest/DevGuideCodingBasicsClient.html'>Client-side</a></li>
      <li><a href='./../doc/latest/DevGuideCodingBasicsCompatibility.html'>JRE Compatibility</a></li>
      <li><a href='./../doc/latest/DevGuideServerCommunication.html' title="Communicate with a server">Ajax Communication</a></li>
      <li><a href='./../doc/latest/DevGuideCodingBasicsHistory.html'>History Mechanism</a></li>
      <li><a href='./../doc/latest/DevGuideCodingBasicsFormatting.html' title="Number and Date Formating">Formatting</a></li>
      <li><a href='./../doc/latest/DevGuideCodingBasicsDelayed.html'>Delayed Logic</a></li>
      <li><a href='./../doc/latest/DevGuideCodingBasicsJSON.html'>Working with JSON</a></li>
      <li><a href='./../doc/latest/DevGuideCodingBasicsXML.html'>Working with XML</a></li>
      <li><a href='./../doc/latest/DevGuideCodingBasicsJSNI.html' title="JavaScript Native Interface">JavaScript: JSNI</a></li>
      <li><a href='./../doc/latest/DevGuideCodingBasicsJsInterop.html' title="JsInterop">JavaScript: JsInterop</a></li>
      <li><a href='./../doc/latest/DevGuideCodingBasicsOverlay.html'>Overlay Types</a></li>
      <li><a href='./../doc/latest/DevGuideCodingBasicsDeferred.html'>Deferred Binding</a></li>
    </ul></li>
    <li><a href="#">Build User Interfaces</a>
    <ul>
      <li><a href='./../doc/latest/DevGuideUi.html'>Contents</a></li>
      <li><a href='./../doc/latest/DevGuideUiBrowser.html'>Cross-Browser Support</a></li>
      <li><a href='./../doc/latest/DevGuideUiPanels.html'>Layout with Panels</a></li>
      <li><a href='./../doc/latest/DevGuideUiWidgets.html'>Widgets</a></li>
      <li><a href='./../doc/latest/DevGuideUiCustomWidgets.html'>Custom Widgets</a></li>
      <li><a href='./../doc/latest/DevGuideUiCellWidgets.html'>Cell Widgets</a></li>
      <li><a href='./../doc/latest/DevGuideUiCellTable.html'>Cell Tables</a></li>
      <li><a href='./../doc/latest/DevGuideUiCustomCells.html'>Custom Cells</a></li>
      <li><a href='./../doc/latest/DevGuideUiEditors.html'>Editors</a></li>
      <li><a href='./../doc/latest/DevGuideUiDom.html'>Using the DOM</a></li>
      <li><a href='./../doc/latest/DevGuideUiHandlers.html'>Events &amp; Handlers</a></li>
      <li><a href='./../doc/latest/DevGuideUiCss.html'>Css Styling</a></li>
      <li><a href='./../doc/latest/DevGuideUiBinder.html'>UIBinder</a></li>
      <li><a href='./../doc/latest/DevGuideUiImageBundles.html'>Image Bundles</a></li>
    </ul></li>
    <li><a href="#">Html5 Support</a>
    <ul>
      <li><a href='./../doc/latest/DevGuideHtml5.html'>Contents</a></li>
      <li><a href='./../doc/latest/DevGuideHtml5Storage.html'>Html5 Storage</a></li>
    </ul></li>
    <li><a href="#">Test with JUnit</a>
    <ul>
      <li><a href='./../doc/latest/DevGuideTesting.html'>Guide</a></li>
      <li><a href='./../doc/latest/DevGuideTestingHtmlUnit.html'>HtmlUnit</a></li>
      <li><a href='./../doc/latest/DevGuideTestingRemoteTesting.html'>Remote Testing</a></li>
      <li><a href='./../doc/latest/DevGuideTestingCoverage.html'>Code Coverage</a></li>
    </ul></li>
    <li><a href='./../doc/latest/DevGuideDeploying.html'>Deploy</a></li>
    <li><a href="#">Advanced Topics</a>
    <ul>
      <li><a href='./../doc/latest/DevGuideLogging.html'>Logging</a></li>
      <li><a href="#">Security</a>
      <ul>
        <li><a href='./../doc/latest/DevGuideSecurity.html'>Contents</a></li>
        <li><a href='./../doc/latest/DevGuideSecuritySafeHtml.html'>Using SafeHtml</a></li>
        <li><a href='./../doc/latest/DevGuideSecurityRpcXsrf.html'>XSRF Protection</a></li>
      </ul></li>
      <li><a href='./../doc/latest/DevGuideAutoBeans.html'>AutoBeans</a></li>
      <li><a href='./../doc/latest/DevGuideRequestFactory.html'>Request Factory</a></li>
      <li><a href='./../doc/latest/DevGuideMvpActivitiesAndPlaces.html'>Activities And Places</a></li>
      <li><a href='./../doc/latest/DevGuideValidation.html'>Validation</a></li>
      <li><a href="#">Internationalization</a>
      <ul>
        <li><a href='./../doc/latest/DevGuideI18n.html' title="I18N">Introduction</a></li>
        <li><a href='./../doc/latest/DevGuideI18nLocale.html'>Locale</a></li>
        <li><a href='./../doc/latest/DevGuideI18nConstants.html'>Constants</a></li>
        <li><a href='./../doc/latest/DevGuideI18nMessages.html'>Messages</a></li>
        <li><a href='./../doc/latest/DevGuideI18nPluralForms.html'>Plural Forms</a></li>
        <li><a href='./../doc/latest/DevGuideUiBinderI18n.html'>UI Binder</a></li>
      </ul></li>
      <li><a href='./../doc/latest/DevGuideA11y.html'>Accessibility</a></li>
      <li><a href="#">Optimize</a>
      <ul>
        <li><a href='./../doc/latest/DevGuideOptimizing.html'>Overview</a></li>
        <li><a href='./../doc/latest/DevGuideCodeSplitting.html'>Code Splitting</a></li>
        <li><a href='./../doc/latest/DevGuideCompileReport.html'>Compile Report</a></li>
        <li><a href='./../doc/latest/DevGuideClientBundle.html'>Client Bundle</a></li>
        <li><a href='./../doc/latest/DevGuideGssVsCss.html'>GSS vs CSS Syntax</a></li>
        <li><a href='./../doc/latest/DevGuideLightweightMetrics.html'>Lightweight Metrics</a></li>
      </ul></li>
      <li><a href='./../doc/latest/DevGuideLinkers.html'>Linkers</a></li>
    </ul></li>
    <li><a href="#">Reference</a>
    <ul>
      <li><a href='./../doc/latest/RefCommandLineTools.html'>Command Line Tools</a></li>
      <li><a href='./../doc/latest/RefGWTClassAPI.html'>GWT Class API</a></li>
      <li><a href='./../doc/latest/RefJreEmulation.html'>Jre Emulation</a></li>
      <li><a href='./../doc/latest/RefWidgetGallery.html'>Widgets Gallery</a></li>
    </ul></li>
    <li><a href="#">FAQ</a>
    <ul>
      <li><a href='./../doc/latest/FAQ.html'>Contents</a></li>
      <li><a href='./../doc/latest/FAQ_GettingStarted.html'>Getting Started</a></li>
      <li><a href='./../doc/latest/FAQ_DebuggingAndCompiling.html'>Debug &amp; Compile</a></li>
      <li><a href='./../doc/latest/FAQ_UI.html'>Build UI</a></li>
      <li><a href='./../doc/latest/FAQ_Client.html'>Client</a></li>
      <li><a href='./../doc/latest/FAQ_Server.html'>Server</a></li>
      <li><a href='./../doc/latest/FAQ_Troubleshooting.html'>Troubleshooting</a></li>
    </ul></li>
    <li><a href='./../doc/latest/DevGuideGlossary.html'>Glossary</a></li>
  </ul></li>
  <li><a href='./../examples.html'>Resources</a>
  <ul>
    <li><a href='./../examples.html'>Examples</a></li>
    <li><a href='./../presentations.html' title="Different Presentations on GWT">Presentations</a></li>
    <li><a href="#">Articles</a>
    <ul>
      <li><a href='./../articles/articles.html'>Overview</a></li>
      <li><a href='./../articles/gss_migration.html' title="Migrating CssResources from CSS to GSS">GSS Migration</a></li>
      <li><a href='./../articles/fragment_merging.html'>Fragment Merging</a></li>
      <li><a href='./../articles/superdevmode.html'>Super Dev Mode</a></li>
      <li><a href='./../articles/elemental.html'>Elemental</a></li>
      <li><a href='./../articles/dynamic_host_page.html' title="Running GWT in dynamic host pages">Dynamic Host Page</a></li>
      <li><a href="#">Building MVP apps</a>
      <ul>
        <li><a href='./../articles/mvp-architecture.html'>MVP Part I</a></li>
        <li><a href='./../articles/mvp-architecture-2.html'>MVP Part II</a></li>
      </ul></li>
      <li><a href='./../articles/using_gwt_with_hibernate.html'>GWT &amp; Hibernate</a></li>
      <li><a href='./../articles/testing_methodologies_using_gwt.html' title="Best practices on Testing GWT applications">Testing</a></li>
      <li><a href='./../articles/dom_events_memory_leaks_and_you.html' title="How GWT tackles memory leaks">DOM Memory Leaks</a></li>
      <li><a href='./../articles/security_for_gwt_applications.html' title="Security for GWT applications">Security</a></li>
      <li><a href='./../articles/using_gwt_for_json_mashups.html' title="Using GWT for JSON Mashups">JSON &amp; Mashups</a></li>
      <li><a href='./../articles/gwt-iphone.html'>GWT iPhone</a></li>
    </ul></li>
    <li><a href='./../books.html' title="GWT Books">Books</a></li>
    <li><a href='./../casestudies.html' title="Case Studies for using GWT">Case Studies</a></li>
    <li><a href="#">Community</a>
    <ul>
      <li><a href='./../community.html'>Community &amp; Forums</a></li>
      <li><a href='./../community-group-charter.html' title="Community Group Charter">Community Group</a></li>
      <li><a href='./../developer_spotlight.html'>Developer Spotlight</a></li>
    </ul></li>
  </ul></li>
  <li><a href='./../makinggwtbetter.html'>Making GWT Better</a>
  <ul>
    <li><a href='./../makinggwtbetter.html' title="Learn how to contribute to GWT">Contributing</a></li>
    <li><a href='./../lifeofanissue.html' title="Learn about GWT and the issue tracker">Life of an Issue</a></li>
    <li><a href='./../steering.html' title="The GWT Steering Committee">Steering Committee</a>
    <ul>
      <li><a href='./../meetingnotes.html'>Meeting Notes</a></li>
    </ul></li>
  </ul></li>
  <li><a href='./../terms.html'>Terms</a>
  <ul>
    <li><a href='./../terms.html'>GWT License</a></li>
    <li><a href='./../GWTPolicy.html'>GWT Name Use Policy</a></li>
    <li><a href='./../privacy.html'>Privacy</a></li>
  </ul></li>
</ul>
            </nav>

            <div id="search">
                <form onsubmit="javascript:void(0)">
                    <input type="text"/>
                    <button type="submit"><i class="icon_search"></i> <span>Search</span></button>
                </form>
            </div>

            <div style="visibility:hidden">
                <gcse:searchresults-only gname="searchresults"></gcse:searchresults-only>
            </div>

            <div id="content" role="main">
                <div class="container">
                    <span id="editLink" title="Edit this page on GitHub">
                        <a class="icon_editGithub" href="https://github.com/gwtproject/gwt-site/edit/main/src/main/markdown/articles/mvp-architecture-2.md"></a>
                    </span>
                    <h1>Building MVP apps: MVP Part II</h1><p><em>Chris Ramsdale, Google Developer Relations</em></p><p><em>Updated March 2010</em></p><p>The sample project, referenced throughout this tutorial, can be downloaded at <a href="https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/google-web-toolkit/Tutorial-Contacts2.zip">Tutorial-Contacts2.zip</a>.</p><p>With the foundation of our MVP-based app laid out, you may be asking yourself, &ldquo;Hey, why can&rsquo;t I use that fancy <a href="#uibinder">UiBinder</a> feature that was previously discussed?&rdquo; This answer is, you can with a little bit of tweaking within the Views and Presenters. On top of that, you may find that the code flows more smoothly and the techniques we put in place will dovetail nicely when we address the topic of implementing more <a href="#complex_uis">complex UIs</a>, <a href="#optimized_uis">optimized UIs</a>, and <a href="#code_splitting">code splitting</a>.</p><h2>Doing things the UiBinder way <a id="uibinder"></a></h2><p>To start things out, let&rsquo;s take a look at the code that constructs our main ContactList view. Previously we programmatically setup the UI within the ContactsView constructor:</p>
<pre><code>public class ContactsView extends Composite implements ContactsPresenter.Display {
  ...
  public ContactsView() {
    DecoratorPanel contentTableDecorator = new DecoratorPanel();
    initWidget(contentTableDecorator);
    contentTableDecorator.setWidth(&quot;100%&quot;);
    contentTableDecorator.setWidth(&quot;18em&quot;);
    contentTable = new FlexTable();
    contentTable.setWidth(&quot;100%&quot;);
    contentTable.getCellFormatter().addStyleName(0, 0, &quot;contacts-ListContainer&quot;);
    contentTable.getCellFormatter().setWidth(0, 0, &quot;100%&quot;);
    contentTable.getFlexCellFormatter().setVerticalAlignment(0, 0, DockPanel.ALIGN_TOP);

    // Create the menu
    //
    HorizontalPanel hPanel = new HorizontalPanel();
    hPanel.setBorderWidth(0);
    hPanel.setSpacing(0);
    hPanel.setHorizontalAlignment(HorizontalPanel.ALIGN_LEFT);
    addButton = new Button(&quot;Add&quot;);
    hPanel.add(addButton);
    deleteButton = new Button(&quot;Delete&quot;);
    hPanel.add(deleteButton);
    contentTable.getCellFormatter().addStyleName(0, 0, &quot;contacts-ListMenu&quot;);
    contentTable.setWidget(0, 0, hPanel);

    // Create the contacts list
    //
    contactsTable = new FlexTable();
    contactsTable.setCellSpacing(0);
    contactsTable.setCellPadding(0);
    contactsTable.setWidth(&quot;100%&quot;);
    contactsTable.addStyleName(&quot;contacts-ListContents&quot;);
    contactsTable.getColumnFormatter().setWidth(0, &quot;15px&quot;);
    contentTable.setWidget(1, 0, contactsTable);
    contentTableDecorator.add(contentTable);
  }
  ...
}
</code></pre><p>The first step towards a UiBinder-way of doing things is to move this code into a Contacts.ui.xml file and perform the associated transformations. As mentioned in previous chapters, constructing UiBinder-based UIs allows you to do so in a declarative way that resembles HTML more than straight Java code. To that extent, the result is the following:</p>
<pre><code>ContactsView.ui.xml

&lt;ui:UiBinder
  xmlns:ui=&quot;urn:ui:com.google.gwt.uibinder&quot;
  xmlns:g=&quot;urn:import:com.google.gwt.user.client.ui&quot;&gt;

  &lt;ui:style&gt;
    .contactsViewButtonHPanel {
      margin: 5px 0px 0x 5px;
    }
    .contactsViewContactsFlexTable {
      margin: 5px 0px 5px 0px;
    }

  &lt;/ui:style&gt;

  &lt;g:DecoratorPanel&gt;
    &lt;g:VerticalPanel&gt;
      &lt;g:HorizontalPanel addStyleNames=&quot;{style.contactsViewButtonHPanel}&quot;&gt;
        &lt;g:Button ui:field=&quot;addButton&quot;&gt;Add&lt;/g:Button&gt;
        &lt;g:Button ui:field=&quot;deleteButton&quot;&gt;Delete&lt;/g:Button&gt;
      &lt;/g:HorizontalPanel&gt;
      &lt;g:FlexTable ui:field=&quot;contactsTable&quot; addStyleNames=&quot;{style.contactsViewContactsFlexTable}&quot;/&gt;
    &lt;/g:VerticalPanel&gt;
  &lt;/g:DecoratorPanel&gt;
&lt;/ui:UiBinder&gt;
</code></pre><p>Here we&rsquo;ve laid out a VerticalPanel that wraps our Add/Delete buttons and FlexTable that contains the list of contacts. This is then wrapped by a DecoratorPanel for a bit of style. The <code>&lt;ui:style&gt;</code> element declares a small amount of margin so that things aren&rsquo;t placed too close together. The ContactsView constructor and members are then reduced to the following:</p>
<pre><code>public class ContactsViewImpl&lt;T&gt; extends Composite implements ContactsView&lt;T&gt; {
  ...
  @UiTemplate(&quot;ContactsView.ui.xml&quot;)
  interface ContactsViewUiBinder extends UiBinder&lt;Widget, ContactsViewImpl&gt; {}
  private static ContactsViewUiBinder uiBinder =
    GWT.create(ContactsViewUiBinder.class);

  @UiField FlexTable contactsTable;
  @UiField Button addButton;
  @UiField Button deleteButton;

  public ContactsViewImpl() {
    initWidget(uiBinder.createAndBindUi(this));
  }
  ...
}
</code></pre><p>We&rsquo;ll get to why it&rsquo;s templatized, why it&rsquo;s an &ldquo;impl&rdquo; class, and why we use the UiTemplate annotation later on when we discuss &ldquo;Complex UIs - Dumb Views&rdquo;. For now it&rsquo;s important to note that a) we&rsquo;ll access the underlying widgets via the UiField annotations, and b) the constructor code is significantly smaller. And by &ldquo;smaller&rdquo;, I mean a single line. UiBinder does a good job of removing the boilerplate code necessary to setup UIs, and allows you to further segment the code that declares the UI from the code that drives the UI.</p><p>Now that we have the UI constructed, we need to hook up the associated UI events, namely Add/Delete button clicks, and interaction with the contact list FlexTable. This is where we&rsquo;ll start to notice significant changes in the overall layout of our application design. Mainly due to the fact that we want to link methods within the view to UI interactions via the UiHandler annotation. The first major change is that we want our ContactsPresenter to implement a Presenter interface that allows our ContactsView to callback into the presenter when it receives a click, select or other event. The Presenter interface defines the following:</p>
<pre><code>public interface Presenter&lt;T&gt; {
    void onAddButtonClicked();
    void onDeleteButtonClicked();
    void onItemClicked(T clickedItem);
    void onItemSelected(T selectedItem);
  }
</code></pre><p>Again, templatizing the interface will be covered in the next section, but with this interface in place you can start to see how the ContactsView is going to communicate with the ContactsPresenter. The first part of wiring everything up is to have our ContactsPresenter implement the Presenter interface, and then register itself with the underlying view. To register itself, we&rsquo;ll need our ContactsView to expose a setPresenter() method:</p>
<pre><code>private Presenter&lt;T&gt; presenter;
  public void setPresenter(Presenter&lt;T&gt; presenter) {
    this.presenter = presenter;
  }
</code></pre><p>Now we can take a look at how we&rsquo;ll wire up the UI interactions within the ContactsView via the UiHandler annotation:</p>
<pre><code>public class ContactsViewImpl&lt;T&gt; extends Composite implements ContactsView&lt;T&gt; {
  ...
  @UiHandler(&quot;addButton&quot;)
  void onAddButtonClicked(ClickEvent event) {
    if (presenter != null) {
      presenter.onAddButtonClicked();
    }
  }

  @UiHandler(&quot;deleteButton&quot;)
  void onDeleteButtonClicked(ClickEvent event) {
    if (presenter != null) {
      presenter.onDeleteButtonClicked();
    }
  }

  @UiHandler(&quot;contactsTable&quot;)
  void onTableClicked(ClickEvent event) {
    if (presenter != null) {
      HTMLTable.Cell cell = contactsTable.getCellForEvent(event);

      if (cell != null) {
        if (shouldFireClickEvent(cell)) {
          presenter.onItemClicked(rowData.get(cell.getRowIndex()));
        }

        if (shouldFireSelectEvent(cell)) {
          presenter.onItemSelected(rowData.get(cell.getRowIndex()));

        }
      }
    }
  }
  ...
}
</code></pre><p>Using this technique, we&rsquo;ve provided the UiBinder generator the corresponding methods that should be called when a Widget has a &ldquo;ui:field&rdquo; attribute set to &ldquo;addButton&rdquo;, &ldquo;deleteButton&rdquo;, and &ldquo;contactsTable&rdquo;. On the ContactsPresenter side of the fence we end up with the following:</p>
<pre><code>public class ContactsPresenter implements Presenter {
  ...
  public void onAddButtonClicked() {
    eventBus.fireEvent(new AddContactEvent());
  }

  public void onDeleteButtonClicked() {
    deleteSelectedContacts();
  }

  public void onItemClicked(ContactDetails contactDetails) {
    eventBus.fireEvent(new EditContactEvent(contactDetails.getId()));
  }

  public void onItemSelected(ContactDetails contactDetails) {
    if (selectionModel.isSelected(contactDetails)) {
      selectionModel.removeSelection(contactDetails);
    }
    else {
      selectionModel.addSelection(contactDetails);
    }
  }
  ...
}
</code></pre><p>The resulting method implementations are the same as the non-UiBinder sample, with the exception of the onItemClicked() and onItemSelected() methods. And while these methods may seem straightforward, we need to dive into how they came about, and explain what this &ldquo;SelectionModel&rdquo; is in the first place. This and much, much more is explained in the next section.</p><h2>Complex UIs - Dumb Views <a id="complex_uis"></a></h2><p>Our current solution is to have our presenters pass a dumbed down version of the model to our views. In the case of our ContactsView, the presenter takes a list of DTOs (Data Transfer Objects) and constructs a list of Strings that it then passes to the view.</p>
<pre><code>public ContactsPresenter implements Presenter {
  ...
  public void onSuccess(ArrayList&lt;ContactDetails&gt; result) {
    contactDetails = result;
    sortContactDetails();
    List&lt;String&gt; data = new ArrayList&lt;String&gt;();
    for (int i = 0; i &lt; result.size(); ++i) {
      data.add(contactDetails.get(i).getDisplayName());
    }

    display.setData(data);
  }
  ...
}
</code></pre><p>The &ldquo;data&rdquo; object that is passed to the view is a very (and I mean very) simplistic ViewModel &mdash; basically a representation of a more complex data model using primitives. This is fine for a simplistic view, but as soon as you start to do something more complex, you quickly realize that something has to give. Either the presenter needs to know more about the view (making it hard to swap out views for other platforms), or the view needs to know more about the data model (ultimately making your view smarter, thus requiring more GwtTestCases). The solution is to use generics along with a third party that abstracts any knowledge of a cell&rsquo;s data type, as well as how that data type is rendered.</p><p>First, we&rsquo;re going to rely on the fact that data types are typically homogeneous within column borders. Doing so allows us to define a ColumnDefinition abstract class that houses the any type-specific code (this is the third party mentioned above).</p>
<pre><code>public abstract class ColumnDefinition&lt;T&gt; {
    public abstract Widget render(T t);

    public boolean isClickable() {
      return false;
    }

    public boolean isSelectable() {
      return false;
    }
  }
</code></pre><p>By stringing together a list of these classes, and providing the necessary render() implementations and isClickable()/isSelectable() overrides, you can start see how we would define our layout. Let&rsquo;s take a look at how we would make this work with our Contacts sample.</p>
<pre><code>public class ContactsViewColumnDefinitions&lt;ContactDetails&gt; {
    List&lt;ColumnDefinition&lt;ContactDetails&gt;&gt; columnDefinitions =
      new ArrayList&lt;ColumnDefinition&lt;ContactDetails&gt;&gt;();

    private ContactsViewColumnDefinitions() {
      columnDefinitions.add(new ColumnDefinition&lt;ContactDetails&gt;() {
        public Widget render(ContactDetails c) {
          return new CheckBox();
        }

        public boolean isSelectable() {
          return true;
        }
      });

      columnDefinitions.add(new ColumnDefinition&lt;ContactDetails&gt;() {
        public Widget render(ContactDetails c) {
          return new HTML(c.getDisplayName());
        }

        public boolean isClickable() {
          return true;
        }
      });
    }

    public List&lt;ColumnDefinition&lt;ContactDetails&gt;&gt; getColumnDefnitions() {
      return columnDefinitions;
    }
  }
</code></pre><p>These ColumnDefinition(s) would be created outside of the presenter so that we can reuse its logic regardless of what view we&rsquo;ve attached ourself to (be it an iPhone, Android, desktop, etc&hellip; view). This can be done using a platform-specific ContactsViewColumnDefinitions class that is loaded (or injected using GIN) on a per-permutation basis. Regardless of the technique, we&rsquo;ll need to update our views such that we can set their ColumnDefinition(s).</p>
<pre><code>public class ContactsViewImpl&lt;T&gt; extends Composite implements ContactsView&lt;T&gt; {
    ...
    private List&lt;ColumnDefinition&lt;T&gt;&gt; columnDefinitions;
    public void setColumnDefinitions(
        List&lt;ColumnDefinition&lt;T&gt;&gt; columnDefinitions) {
      this.columnDefinitions = columnDefinitions;
    }
    ...
  }
</code></pre><p>Note that our ContactsView is now ContactsViewImpl<T> and implements ContactsView<T>. This is so that we can pass in a mocked ContactsView instance when testing our ContactsPresenter. Now in our AppController, when we create the ContactsView, we can initialize it with the necessary ColumnDefinition(s).</p>
<pre><code>public class AppController implements Presenter, ValueChangeHandler&lt;String&gt; {
    ...
    public void onValueChange(ValueChangeEvent&lt;String&gt; event) {
      String token = event.getValue();
      if (token != null) {
        Presenter presenter = null;
        if (token.equals(&quot;list&quot;)) {
          // lazily initialize our views, and keep them around to be reused
          //
          if (contactsView == null) {
            contactsView = new ContactsViewImpl&lt;ContactDetails&gt;();
            if (contactsViewColumnDefinitions == null) {
              contcactsViewColumnDefinitions = new ContactsViewColumnDefinitions().getColumnDefinitions();
            }
            contactsView.setColumnDefiniions(contactsViewColumnDefinitions);
         }
        }
        presenter = new ContactsPresenter(rpcService, eventBus, contactsView);
      }
      ...
    }
    ...
  }
</code></pre><p>With the ColumnDefinition(s) in place, we will start to see the fruits of our labor. Mainly in the way we pass model data to the view. As mentioned above we were previously dumbing down the model into a list of Strings. With our ColumnDefinition(s) we can pass the model untouched.</p>
<pre><code>public class ContactsPresenter implements Presenter,
    ...
    private void fetchContactDetails() {
      rpcService.getContactDetails(new AsyncCallback&lt;ArrayList&lt;ContactDetails&gt;&gt;() {
        public void onSuccess(ArrayList&lt;ContactDetails&gt; result) {
            contactDetails = result;
            sortContactDetails();
            view.setRowData(contactDetails);
        }
        ...
      });
    }
    ...
  }
</code></pre><p>And our ContactsViewImpl has the following setRowData() implementation:</p>
<pre><code>public class ContactsViewImpl&lt;T&gt; extends Composite implements ContactsView&lt;T&gt; {
    ...
    public void setRowData(List&lt;T&gt; rowData) {
      contactsTable.removeAllRows();
      this.rowData = rowData;

      for (int i = 0; i &lt; rowData.size(); ++i) {
        T t = rowData.get(i);
        for (int j = 0; j &lt; columnDefinitions.size(); ++j) {
          ColumnDefinition&lt;T&gt; columnDefinition = columnDefinitions.get(j);
          contactsTable.setWidget(i, j, columnDefinition.render(t));
        }
      }
    }
    ...
  }
</code></pre><p>A definite improvement; the presenter can pass the model untouched and the view has no rendering code that we would otherwise need to test. And the fun doesn&rsquo;t stop there. Remember the isClickable() and isSelectable() methods? Well, let&rsquo;s take a look at how they work in conjunction with ClickEvents that are received within the view.</p>
<pre><code>public class ContactsViewImpl&lt;T&gt; extends Composite implements ContactsView&lt;T&gt; {
    ...
    @UiHandler(&quot;contactsTable&quot;)
    void onTableClicked(ClickEvent event) {
      if (presenter != null) {
        HTMLTable.Cell cell = contactsTable.getCellForEvent(event);

        if (cell != null) {
          if (shouldFireClickEvent(cell)) {
            presenter.onItemClicked(rowData.get(cell.getRowIndex()));
          }

          if (shouldFireSelectEvent(cell)) {
            presenter.onItemSelected(rowData.get(cell.getRowIndex()));
          }
        }
      }
    }

    private boolean shouldFireClickEvent(HTMLTable.Cell cell) {
      boolean shouldFireClickEvent = false;

      if (cell != null) {
        ColumnDefinition&lt;T&gt; columnDefinition =
          columnDefinitions.get(cell.getCellIndex());

        if (columnDefinition != null) {
          shouldFireClickEvent = columnDefinition.isClickable();
        }
      }

      return shouldFireClickEvent;
    }

    private boolean shouldFireSelectEvent(HTMLTable.Cell cell) {
      boolean shouldFireSelectEvent = false;

      if (cell != null) {
        ColumnDefinition&lt;T&gt; columnDefinition =
          columnDefinitions.get(cell.getCellIndex());

        if (columnDefinition != null) {
          shouldFireSelectEvent = columnDefinition.isSelectable();
        }
      }

      return shouldFireSelectEvent;
    }
    ...
  }
</code></pre><p>The notion here is that you&rsquo;ll want to respond to user interaction in different ways based upon the cell type that was clicked. Given that our ColumnDefinition(s) are intertwined with the cell type, we&rsquo;re not only able to use them for rendering purposes, but for defining how to interpret user interactions.</p><p>To take this one final step further, we&rsquo;re going to remove any application state from the ContactsView. To do this, we&rsquo;ll replace the view&rsquo;s getSelectedRows() with a SelectionModel that the presenter holds on to. The SelectionModel is nothing more than a wrapper around a list of model objects.</p>
<pre><code>public class SelectionModel&lt;T&gt; {
    List&lt;T&gt; selectedItems = new ArrayList&lt;T&gt;();

    public List&lt;T&gt; getSelectedItems() {
      return selectedItems;
    }

    public void addSelection(T item) {
      selectedItems.add(item);
    }

    public void removeSelection(T item) {
      selectedItems.remove(item);
    }

    public boolean isSelected(T item) {
      return selectedItems.contains(item);
    }
  }
</code></pre><p>The ContactsPresenter holds on to an instance of this class and updates it accordingly, based on calls to onItemSelected().</p>
<pre><code>public class ContactsPresenter implements Presenter,
    ...
    public void onItemSelected(ContactDetails contactDetails) {
      if (selectionModel.isSelected(contactDetails)) {
        selectionModel.removeSelection(contactDetails);
      }

      else {
        selectionModel.addSelection(contactDetails);
      }
    }
    ...
  }
</code></pre><p>When it needs to grab the list of selected items, for example when the user clicks the &ldquo;Delete&rdquo; button, it has them right at its disposal.</p>
<pre><code>public class ContactsPresenter implements Presenter,
    ...

    public void onDeleteButtonClicked() {
      deleteSelectedContacts();
    }

    private void deleteSelectedContacts() {
      List&lt;ContactDetails&gt; selectedContacts = selectionModel.getSelectedItems();
      ArrayList&lt;String&gt; ids = new ArrayList&lt;String&gt;();

      for (int i = 0; i &lt; selectedContacts.size(); ++i) {
        ids.add(selectedContacts.get(i).getId());
      }

      rpcService.deleteContacts(ids, new AsyncCallback&lt;ArrayList&lt;ContactDetails&gt;&gt;() {
        public void onSuccess(ArrayList&lt;ContactDetails&gt; result) {
           ...
        }
        ...
      });
    }
    ...
  }
</code></pre><p>Alright, so that was a fair amount to digest, and describing it in code snippets might lead to some being &ldquo;lost in translation&rdquo;. If that&rsquo;s the case, be sure to check out the full source that is available <a href="http://code.google.com/p/google-web-toolkit/downloads/detail?name=Tutorial-Contacts2.zip">here</a>.</p><h2>Optimized UIs - Dumb Views <a id="optimized_uis"></a></h2><p>We&rsquo;ve figured out how to create the foundation for complex UIs while sticking to our requirement that the view remain as dumb (and minimally testable) as possible, but that&rsquo;s no reason to stop. While functionality is decoupled, there is still room for optimization. Having the ColumnDefinition create a new widget for each cell is too heavy, and can quickly lead to performance degradation as your application grows. The two leading factors of this degradation are:</p>
<ul>
  <li><p>Inefficiencies related to inserting new elements via DOM manipulation</p></li>
  <li><p>Overhead associated with sinking events per Widget</p></li>
</ul><p>To overcome this we will update our application to do the following (in respective order):</p>
<ul>
  <li>Replace our FlexTable implementation with an HTML widget that we&rsquo;ll populate by calling setHTML(), effectively batching all DOM manipulation into a single call.</li>
  <li>Reduce the event overhead by sinking events on the HTML widget, rather than the individual cells.</li>
</ul><p>The changes are encompassed within our ContactsView.ui.xml file, as well as our setRowData() and onTableClicked() methods. First we&rsquo;ll need to update our ContactsView.ui.xml file to use a HTML widget rather than a FlexTable widget.</p>
<pre><code>&lt;ui:UiBinder&gt;
  ...
  &lt;g:DecoratorPanel&gt;
    &lt;g:VerticalPanel&gt;
      &lt;g:HorizontalPanel addStyleNames=&quot;{style.contactsViewButtonHPanel}&quot;&gt;
        &lt;g:Button ui:field=&quot;addButton&quot;&gt;Add&lt;/g:Button&gt;
        &lt;g:Button ui:field=&quot;deleteButton&quot;&gt;Delete&lt;/g:Button&gt;
      &lt;/g:HorizontalPanel&gt;
      &lt;g:HTML ui:field=&quot;contactsTable&quot;&gt;&lt;/g:HTML&gt;
    &lt;/g:VerticalPanel&gt;
  &lt;/g:DecoratorPanel&gt;
&lt;/ui:UiBinder&gt;
</code></pre><p>We&rsquo;ll also need to change the widget that we reference within our ContactsViewImpl class.</p>
<pre><code>public class ContactsViewImpl&lt;T&gt; extends Composite implements ContactsView&lt;T&gt; {
  ...
  @UiField HTML contactsTable;
  ...
</code></pre><p>Next we&rsquo;ll make the necessary changes to our setRowData() method.</p>
<pre><code>public class ContactsViewImpl&lt;T&gt; extends Composite implements ContactsView&lt;T&gt; {
  ...
  public void setRowData(List&lt;T&gt; rowData) {
    this.rowData = rowData;

    TableElement table = Document.get().createTableElement();
    TableSectionElement tbody = Document.get().createTBodyElement();
    table.appendChild(tbody);

    for (int i = 0; i &lt; rowData.size(); ++i) {
      TableRowElement row = tbody.insertRow(-1);
      T t = rowData.get(i);

      for (int j = 0; j &lt; columnDefinitions.size(); ++j) {
        TableCellElement cell = row.insertCell(-1);
        StringBuilder sb = new StringBuilder();
        columnDefinitions.get(j).render(t, sb);
        cell.setInnerHTML(sb.toString());

        // TODO: Really total hack! There&#39;s gotta be a better way...
        Element child = cell.getFirstChildElement();
        if (child != null) {
          Event.sinkEvents(child, Event.ONFOCUS | Event.ONBLUR);
        }
      }
    }

    contactsTable.setHTML(table.getInnerHTML());
  }
  ...
}
</code></pre><p>The above code is similar to our original setRowData() method, we iterate through the rowData and for each item ask our column definitions to render accordingly. The main differences being that a) we&rsquo;re expecting each column definition to render itself into the StringBuilder rather than passing back a full-on widget, and b) we&rsquo;re calling setHTML on a HTML widget rather than calling setWidget on a FlexTable. This will decrease your load time, especially as your tables start to grow.</p><p>Now let&rsquo;s take a look at the code used to sink events on the table.</p>
<pre><code>public class ContactsViewImpl&lt;T&gt; extends Composite implements ContactsView&lt;T&gt; {
  ...
  @UiHandler(&quot;contactsTable&quot;)
  void onTableClicked(ClickEvent event) {
    if (presenter != null) {
      EventTarget target = event.getNativeEvent().getEventTarget();
      Node node = Node.as(target);
      TableCellElement cell = findNearestParentCell(node);
      if (cell == null) {
        return;
      }

      TableRowElement tr = TableRowElement.as(cell.getParentElement());
      int row = tr.getSectionRowIndex();

      if (cell != null) {
        if (shouldFireClickEvent(cell)) {
          presenter.onItemClicked(rowData.get(row));
        }
        if (shouldFireSelectEvent(cell)) {
          presenter.onItemSelected(rowData.get(row));
        }
      }
  ...
}
</code></pre><p>Here our onTableClicked() code gets a bit more complicated, but nothing that would raise a red flag when compared to the rest of our application. To reiterate, we&rsquo;re reducing the overhead of sinking events on per-cell widgets, and instead sinking on a single container, our HTML widget. The ClickEvents are still wired up via our UiHandler annotations, but with this approach, we&rsquo;re going to get the Element that was clicked on and walk the DOM until we find a parent TableCellElement. From there we can determine the row, and thus the corresponding rowData.</p><p>The other tweak we need to make is to update our shouldFireClickEvent() and shouldFireSelectEvent() to take as a parameter a TableCellElement rather than a HTMLTable.Cell. The implementation remains the same, as you can see below.</p>
<pre><code>public class ContactsViewImpl&lt;T&gt; extends Composite implements ContactsView&lt;T&gt; {
  ...
  private boolean shouldFireClickEvent(TableCellElement cell) {
    boolean shouldFireClickEvent = false;

    if (cell != null) {
      ColumnDefinition&lt;T&gt; columnDefinition =
        columnDefinitions.get(cell.getCellIndex());

      if (columnDefinition != null) {
        shouldFireClickEvent = columnDefinition.isClickable();
      }
    }

    return shouldFireClickEvent;
  }

  private boolean shouldFireSelectEvent(TableCellElement cell) {
    boolean shouldFireSelectEvent = false;

    if (cell != null) {
      ColumnDefinition&lt;T&gt; columnDefinition =
        columnDefinitions.get(cell.getCellIndex());

      if (columnDefinition != null) {
        shouldFireSelectEvent = columnDefinition.isSelectable();
      }
    }

    return shouldFireSelectEvent;
  }
  ...
 }
</code></pre><h2>Code Splitting &ndash; Only the relevant parts please <a id="code_splitting"></a></h2><p>Up to this point we&rsquo;ve discussed how code maintainability and testing are benefits of an MVP-based application. One other benefit that may go overlooked is faster startup times via Code Splitting. I know, you&rsquo;re probably wondering what in the world an MVP architecture has to do with code splitting, but the same techniques that make your app more maintainable, and testable, make it easier to split with runAsync() points. Let&rsquo;s back up for a quick recap first. Code Splitting is the act of wrapping segmented pieces of your application into &ldquo;split&rdquo; points by declaring them within a runAsync() call. As long as the split portion of your code is purely segmented, and not referenced by other parts of the app, it will be downloaded and executed at the point that it needs to run.</p><p>So take for example the code we wrote in the previous section. It was rather lengthy, right? Now assume that our application has a login screen, and as usual once the user logs in they&rsquo;re taken to the main application screen (in this case their list of Contacts). Do we really want to download all of that code before the user even logs in? Not really. It would be nice if we could simply grab the login code, and leave the rest for when we actually need it (e.g. after the user has logged in). Well we can, and here&rsquo;s how.</p>
<pre><code>public void onValueChange(ValueChangeEvent&lt;String&gt; event) {
    String token = event.getValue();

    if (token != null) {
      if (token.equals(&quot;list&quot;)) {
        GWT.runAsync(new RunAsyncCallback() {
          ...
          public void onSuccess() {
            // lazily initialize our views, and keep them around to be reused
            //
            if (contactsView == null) {
              contactsView = new ContactsViewImpl&lt;ContactDetails&gt;();
            }
            new ContactsPresenter(rpcService, eventBus, contactsView).go(container);
          }
        });
      }
      ...
   }
</code></pre><p>Here, all we&rsquo;ve done is wrap the code that creates the ContactsView and ContactsPresenter in a runAsync() call, and as a result it won&rsquo;t be downloaded until the first time we go to show the Contact list. After that, subsequent calls will realize that the code has already been downloaded, and will use it in lieu of re-downloading.</p><p>A bit anti climatic isn&rsquo;t it? Well, that&rsquo;s not always a bad thing. The amount of boilerplate code necessary to get an MVP-based app up and running is generally large. But the time spent is not wasted, as optimizations such as this one become easier and easier to implement.</p>

                </div>
            </div>
        </div>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
        <script>window.jQuery || document.write("<script src='./../assets/build/js/vendor/jquery-1.11.0.min.js'><\/script>")</script>

        <script src='./../assets/build/js/vendor/jquery.flexnav.js'></script>
        <script src='./../assets/build/js/global.min.js'></script>

    </body>
</html>
